<#@ template language="C#" #>
<#@ output extension=".cs" #>
<#@ parameter type="System.Int32" name="MaxCount" #>
// <auto-generated />
using System.Runtime.CompilerServices;

namespace Macaron.Functional;

partial class Utility
{
<# for (var i = 2; i <= MaxCount; i++) { #>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static Action<T2, T1<# for (var j = 3; j <= i; j++) { #>, T<#= j #><# } #>> Flip<<# for (var j = 1; j < i; j++) { #>T<#= j #>, <# } #>T<#= i #>>(
        Action<<# for (var j = 1; j < i; j++) { #>T<#= j #>, <# } #>T<#= i #>> action
    )
    {
        return (<# for (var j = 1; j < i; j++) { #>arg<#= j #>, <# } #> arg<#= i #>) => action(arg2, arg1<# for (var j = 3; j <= i; j++) { #>, arg<#= j #><# } #>);
    }

    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static Func<T2, T1<# for (var j = 3; j <= i; j++) { #>, T<#= j #><# } #>, TResult> Flip<<# for (var j = 1; j < i; j++) { #>T<#= j #>, <# } #>T<#= i #>, TResult>(
        Func<<# for (var j = 1; j < i; j++) { #>T<#= j #>, <# } #>T<#= i #>, TResult> fn
    )
    {
        return (<# for (var j = 1; j < i; j++) { #>arg<#= j #>, <# } #> arg<#= i #>) => fn(arg2, arg1<# for (var j = 3; j <= i; j++) { #>, arg<#= j #><# } #>);
    }

<# } // end for i #>
}
